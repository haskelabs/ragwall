# RagWall Healthcare Release Package

This package bundles the artifacts needed to reproduce and deploy RagWall's healthcare-focused protection profile.

## Components

The healthcare release includes the following assets:

| Component | Path | Description |
|-----------|------|-------------|
| Pattern Gate | `sanitizer/jailbreak/prr_gate.py` | Production rule-set with healthcare extensions and flexible spacing patterns |
| Pattern Report | `docs/PATTERN_ENHANCEMENT_SUMMARY.md` | Root-cause analysis and remediation log for the healthcare sweep |
| A/B Evaluation | `docs/AB_EVAL_ENHANCED_RESULTS.md` | 48% HRCR reduction report with bootstrap statistics |
| Query Corpora | `data/health_care_1000_queries*.jsonl` | Converted, sanitized, and baseline healthcare queries |
| Evaluation Reports | `reports/health_100_matched_eval/` | Matched-query evaluation outputs (`rag_ab_summary.json`, etc.) |
| Vector Bank | `experiments/results/tiny_jb_vectors.pt` | Pre-trained jailbreak vectors for cosine scoring |

## Packaging Script

Use the packaging script to assemble a distributable archive:

```bash
python scripts/release/package_healthcare.py \
  --output dist/ragwall-healthcare-release.zip
```

The archive mirrors the component table above and includes an autogenerated `MANIFEST.json` describing checksums for verification.

## After Unpacking

1. Create a virtual environment and install dependencies via `pip install -r requirements.txt`.
2. Export the vector file path when starting the API: `RAGWALL_VECTORS=experiments/results/tiny_jb_vectors.pt python scripts/serve_api.py --healthcare`.
3. Re-run the evaluation to confirm results:
   ```bash
   python scripts/rag/rag_ab_eval.py \
     --embedder st \
     --st-model all-MiniLM-L6-v2 \
     --corpus data/health_eval_corpus_mixed.jsonl \
     --queries data/health_care_1000_queries_converted.jsonl \
     --sanitized data/health_care_1000_queries_sanitized_v3.jsonl \
     --rerank-risk \
     --penalty 0.2 \
     --bootstrap 100 \
     --outdir reports/health_1000_enhanced_eval \
     --healthcare
   ```

## Notes

- The release intentionally omits PHI or production data; all queries are synthetic.
- Regenerate vectors with `python scripts/rag/make_tiny_vectors.py` if you need domain-specific embeddings.
- For support, open an issue or email `security@example.com`.
